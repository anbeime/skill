# 基础模式：4智能体文案创作协作架构

> **说明**：本文档描述的是**基础模式**（4智能体文案创作协作）的详细指导。
>
> 若需要**完整模式**（9智能体端到端全流程创作，包含视觉设计、音频生成、视频剪辑、平台适配），请参考：[full-pipeline-multi-agent.md](full-pipeline-multi-agent.md)
>
> 两种模式的对比：
> - **基础模式**：仅文案创作，4智能体，耗时15分钟，适合小团队快速产出文案素材
> - **完整模式**：端到端创作，9智能体，耗时30分钟，适合MCN机构批量产出多平台视频

---

## 目录
- [架构概述](#架构概述)
- [智能体角色分工](#智能体角色分工)
- [协作工作流](#协作工作流)
- [通信机制](#通信机制)
- [质量保证体系](#质量保证体系)
- [进阶功能](#进阶功能)
- [实施路线图](#实施路线图)

## 架构概述

### 设计理念
通过**专业化分工**和**高效协作**，将历史人物访谈短视频文案的创作过程拆解为多个专业智能体的协作任务，实现：
- **效率提升**：并行处理 + 串行审查，总耗时约15分钟完成专业级创作
- **质量保证**：每个智能体专注一个领域，深度优化
- **可扩展性**：可轻松添加新智能体，如视觉化建议、音乐搭配等

### 核心优势
| 维度 | 传统人工创作 | 单智能体创作 | 多智能体协作 |
|------|------------|------------|------------|
| 耗时 | 3小时以上 | 30分钟 | 15分钟 |
| 历史准确性 | 依赖个人知识 | 一般 | 高（专家智能体） |
| 娱乐性 | 不稳定 | 较好 | 高（梗分析师） |
| 结构化程度 | 难保证 | 一般 | 高（审查智能体） |

## 智能体角色分工

### 1. 历史研究专家智能体 (Historian Agent)

#### 职责
- 历史人物背景研究
- 核心形象提取
- 史实边界界定

#### 输入
- 用户指定或系统推荐的历史人物列表
- 访谈主题或槽点（可选）

#### 输出格式
```json
{
  "人物档案": [
    {
      "姓名": "李白",
      "朝代": "唐朝",
      "核心事迹": ["浪漫主义诗人", "斗酒诗百篇", "漫游天下"],
      "性格特点": ["豪放不羁", "嗜酒如命", "才华横溢"],
      "可调侃点": [
        "诗仙称号是否因喝酒报销",
        "月下独酌是酒瘾还是抑郁症",
        "与杜甫的CP关系"
      ],
      "禁忌边界": [
        "不能歪曲其诗歌成就",
        "不能嘲笑其爱国情怀",
        "避免涉及真实历史争议"
      ],
      "经典名言": [
        "天生我材必有用，千金散尽还复来",
        "举头望明月，低头思故乡"
      ]
    }
  ]
}
```

#### 工作流
1. 人物识别：确认目标历史人物
2. 史实资料检索：从知识库或外部资源提取背景信息
3. 关键信息提取：筛选核心事迹、性格特点
4. 人物档案生成：输出结构化档案

### 2. 热梗融合分析师 (Meme Analyst Agent)

#### 职责
- 分析网络热度趋势
- 匹配历史人物与流行梗的融合点
- 生成梗-人适配矩阵

#### 输入
- 历史人物档案（来自历史研究专家）
- 实时/经典网络热梗库（见 [internet-memes.md](internet-memes.md)）

#### 输出格式
```json
{
  "梗适配矩阵": [
    {
      "人物": "李白",
      "推荐热梗": [
        {
          "热梗": "榜一大哥",
          "适用场景": "形容杜甫作为忠实粉丝",
          "融合点": "杜甫追星李白"
        },
        {
          "热梗": "破防了",
          "适用场景": "杜甫被贬时的心情",
          "融合点": "友情与苦难"
        },
        {
          "热梗": "666",
          "适用场景": "赞扬李白才华",
          "融合点": "诗歌创作能力"
        }
      ]
    }
  ]
}
```

#### 工作流
1. 热梗库更新：定期从网络抓取最新热梗
2. 人物特质分析：从档案中提取关键特质
3. 梗匹配度计算：基于语义相似度和适配性评分
4. 融合建议生成：输出每个人物的最佳热梗组合

### 3. 剧本创作大师 (Scriptwriter Agent)

#### 职责
- 基于前两个智能体的输出，创作完整访谈剧本
- 确保符合输出格式要求
- 添加画面感和镜头提示

#### 输入
- 历史人物档案（来自历史研究专家）
- 梗融合建议（来自热梗分析师）
- 用户风格偏好（吐槽、脑洞、互怼等）

#### 输出
完整的短视频文案，格式见 [输出格式规范](../SKILL.md#输出格式)

#### 工作流
1. 框架构建：确定视频标题、嘉宾梗概、开场
2. 对话撰写：为每个片段创作主持人提问和名人回答
3. 笑点插入：自然融入推荐的热梗
4. 结构化输出：确保符合Markdown格式要求

### 4. 质量审查与优化器 (QC Optimizer Agent)

#### 职责
- 检查文案质量
- 确保符合约束条件
- 进行风格优化

#### 输入
- 原始文案草案（来自剧本创作大师）

#### 输出格式
```json
{
  "质量评分": {
    "历史准确性": 85,
    "娱乐性": 90,
    "传播性": 88,
    "制作友好性": 92,
    "总分": 88.75
  },
  "优化建议": [
    "建议在李白片段增加更多酒相关的梗",
    "苏轼的回复可以更佛系一些",
    "结尾互动引导可以更具体"
  ],
  "最终文案": "[优化后的完整文案]"
}
```

#### 工作流
1. 约束条件检查：验证是否违反禁忌
2. 风格一致性评估：确保语气统一
3. 画面感增强：添加镜头提示和特效说明
4. 最终定稿：生成优化后的文案

## 协作工作流

### 端到端创作流程

```
┌─────────────────────────────────────────────────────────────┐
│  阶段一：触发与需求分析（2分钟）                              │
├─────────────────────────────────────────────────────────────┤
│  用户输入：历史人物 + 主题 / 自动推荐                          │
│  系统：解析需求，确定智能体任务分配                            │
└─────────────────────────────────────────────────────────────┘
                            ↓
┌─────────────────────────────────────────────────────────────┐
│  阶段二：并行研究（3分钟）                                    │
├─────────────────────────────────────────────────────────────┤
│  ┌──────────────────┐    ┌──────────────────┐               │
│  │  历史研究专家     │    │  热梗融合分析师   │               │
│  │  研究人物A、B、C  │    │  分析热门梗匹配   │               │
│  └──────────────────┘    └──────────────────┘               │
│            ↓                        ↓                        │
│  ┌──────────────────────────────────────────┐               │
│  │      两者结果汇总至中央知识库                │               │
│  └──────────────────────────────────────────┘               │
└─────────────────────────────────────────────────────────────┘
                            ↓
┌─────────────────────────────────────────────────────────────┐
│  阶段三：协同创作（5分钟）                                    │
├─────────────────────────────────────────────────────────────┤
│  ┌──────────────────────────────────────────┐               │
│  │         剧本创作大师                      │               │
│  │  接收：人物档案 + 梗融合建议               │               │
│  │  输出：初版访谈文案                        │               │
│  └──────────────────────────────────────────┘               │
└─────────────────────────────────────────────────────────────┘
                            ↓
┌─────────────────────────────────────────────────────────────┐
│  阶段四：质量审查（3分钟）                                   │
├─────────────────────────────────────────────────────────────┤
│  ┌──────────────────────────────────────────┐               │
│  │         质量审查与优化器                  │               │
│  │  检查：历史/娱乐/传播/制作友好性            │               │
│  │  输出：优化后的最终文案 + 评分报告         │               │
│  └──────────────────────────────────────────┘               │
└─────────────────────────────────────────────────────────────┘
                            ↓
┌─────────────────────────────────────────────────────────────┐
│  阶段五：输出与反馈学习（2分钟）                              │
├─────────────────────────────────────────────────────────────┤
│  输出：最终短视频文案                                        │
│  收集：用户满意度数据                                        │
│  用于：优化各智能体模型                                       │
└─────────────────────────────────────────────────────────────┘
```

### 总流程耗时
约 **15分钟** 完成专业级创作（vs 传统人工创作3小时+）

## 通信机制

### 消息格式
采用 **JSON格式** 的消息传递，每个智能体有明确的输入/输出schema。

### 示例：历史专家 → 热梗分析师
```json
{
  "from": "historian_agent",
  "to": "meme_analyst",
  "message_type": "人物档案",
  "timestamp": "2025-01-22T12:00:00Z",
  "payload": {
    "人物档案": [...]
  }
}
```

### 中央协调器
- 负责任务分发与结果整合
- 管理智能体间的消息队列
- 处理异常和重试机制

## 质量保证体系

### 多维度评分体系

| 评估维度 | 权重 | 检查项 |
|---------|------|--------|
| **历史准确性** | 30% | 不歪曲核心形象、史实边界清晰、经典引用正确 |
| **娱乐性** | 30% | 金句频出、反转多、笑点自然 |
| **传播性** | 20% | 网感强、有话题性、易于传播 |
| **制作友好** | 20% | 画面感强、易于分镜、结构清晰 |

### 质量门槛
- **总分 ≥ 80分**：通过审核，输出最终文案
- **总分 < 80分**：返回至创作阶段微调

### 自动化检查点
1. 历史准确性：检查是否触犯禁忌边界
2. 娱乐性：统计热梗使用频率和笑点密度
3. 传播性：分析标题吸引力和话题标签
4. 制作友好性：验证镜头提示和画面描述

## 进阶功能

### 批量创作模式
- 一次性生成多期系列内容
- 支持主题连贯性
- 适合长期运营规划

### A/B测试版本
- 同一主题生成2-3个不同风格的版本
- 供用户选择最佳方案
- 数据驱动优化策略

### 数据驱动优化
- 分析平台播放数据
- 优化梗融入策略
- 持续学习用户偏好

### 跨平台适配
- 生成抖音/快手/B站不同风格的微调版本
- 适配各平台用户群体
- 提升全平台传播效果

## 实施路线图

### 第一阶段：MVP（2周内可上线）
- [x] 实现历史研究专家 + 剧本创作大师双智能体协作
- [x] 建立基础人物库和梗库
- [x] 输出质量达到人工创作的80%

### 第二阶段：完善（1个月内）
- [ ] 加入热梗融合分析师智能体
- [ ] 建立质量审查机制
- [ ] 实现批量创作功能

### 第三阶段：高级（2个月内）
- [ ] 加入视觉化建议智能体
- [ ] 实现数据驱动优化（基于播放数据反馈）
- [ ] 开放API接口，支持第三方调用

### 横向扩展：新智能体

#### 视觉化建议智能体
- 自动生成分镜建议
- 推荐镜头角度和切换
- 设计特效和动画

#### 音乐搭配智能体
- 推荐背景音乐
- 匹配音乐节奏
- 设计音效点缀

#### 标题优化智能体
- 生成多个爆款标题选项
- A/B测试不同标题效果
- 优化点击率

### 纵向深化：细分领域

#### 文人专场智能体
- 专攻李白/杜甫/苏轼等文人群体
- 深度理解文学典故
- 精准把握文人气质

#### 帝王专场智能体
- 专攻秦始皇/武则天/朱元璋等统治者
- 理解政治语言
- 把握帝王心态

#### 女性专场智能体
- 专攻李清照/王昭君/杨玉环等女性人物
- 女性视角表达
- 古代女性职场生存

## 创新亮点

### 1. 分而治之的专业化
每个智能体专注一个领域，深度优化，避免全能智能体的"博而不精"。

### 2. 高效协作流水线
并行处理（历史研究+热梗分析）+ 串行审查（质量检查），平衡速度与质量。

### 3. 持续学习的闭环
用户反馈 → 模型优化 → 更好输出，形成自我进化机制。

### 4. 可量化的质量保证
建立多维评分体系，质量可控，可量化，可优化。

## 技术参考

本架构设计融合了以下项目精华：

- **爆款分析思路**：来自 ViralFlow Creator
- **多智能体协作框架**：来自「灵析」科研文献洞察平台
- **实时处理能力**：来自智能会议小助手
- **高价值Prompt设计**：来自多个大师级Prompt案例

让每个智能体成为专业领域的"大师"，通过精心设计的协作流程，共同创造出既有趣味性又有质量保证的爆款短视频文案。
