---
name: intelligent-content-system
description: |
  智能内容创作与发布全流程系统。根据用户需求自动识别场景，
  编排调用网页采集、智能配图、小红书图文生成、热点内容创作、多平台发布等技能，
  实现从内容获取到发布的一站式自动化。
  
  支持场景：
  - 网页内容采集与再创作（采集→配图→发布）
  - 热点内容创作（热点采集→AI生成→多平台发布）
  - 原创内容优化（配图→小红书图文→发布）
  - 单一功能调用（采集/配图/图文/发布）
  
  支持平台：微信公众号、小红书、X/Twitter、B站
  
dependency:
  skills:
    - baoyu-url-to-markdown
    - article-illustrator
    - baoyu-xhs-images
    - wechat-hotspot-publisher
    - content-creation-publisher
  python:
    - requests>=2.28.0
    - pyyaml>=6.0
  system:
    - Node.js环境（用于baoyu技能）
    - Chrome浏览器（用于CDP功能）
---

# 智能内容创作与发布系统

## 任务目标

- 本技能用于：从内容获取到多平台发布的智能化全流程
- 能力包含：
  - 自动识别用户需求场景
  - 智能编排技能调用链
  - 网页内容采集与转换
  - 文章智能配图
  - 小红书图文生成
  - 热点内容创作
  - 多平台自动发布
- 触发条件：用户提出内容创作或发布相关需求

## 核心特性

### 1. 智能场景识别

系统会自动分析用户输入，识别以下场景：

| 场景代码 | 场景名称 | 触发关键词 | 技能链 |
|---------|---------|-----------|--------|
| **A1** | 采集并发布 | "采集+发布"、"抓取+推送" | url-to-markdown → format → illustrator → publish |
| **A2** | 采集并配图 | "采集+配图"、"抓取+插图" | url-to-markdown → illustrator |
| **A3** | 采集转小红书 | "采集+小红书"、"网页转小红书" | url-to-markdown → xhs-images |
| **B1** | 热点文章生成 | "热点+文章"、"爆款+公众号" | wechat-hotspot-publisher |
| **B2** | 热点图文生成 | "热点+小红书"、"爆款+图文" | wechat-hotspot → xhs-images |
| **B3** | 热点多平台发布 | "热点+多平台" | wechat-hotspot → multi-publish |
| **C1** | 文章配图 | "配图"、"插图"、"加图" | article-illustrator |
| **C2** | 转小红书图文 | "转小红书"、"生成图文" | xhs-images |
| **C3** | 多平台发布 | "发布到"、"推送到" | format → publish |
| **D1** | 仅采集网页 | "采集"、"抓取"、"保存网页" | url-to-markdown |
| **D2** | 仅配图 | "配图"（单独） | article-illustrator |
| **D3** | 仅小红书图文 | "小红书图文"（单独） | xhs-images |
| **D4** | 仅发布 | "发布"（单独） | publish |

详细识别规则见：[references/scenario-detection.md](references/scenario-detection.md)

### 2. 自动参数收集

系统会根据场景自动收集必需参数：

- **URL**：网页地址（用于采集场景）
- **关键词**：热点话题关键词（用于热点场景）
- **文件路径**：Markdown文件路径（用于优化场景）
- **平台列表**：目标发布平台（微信/小红书/X/B站）
- **风格偏好**：小红书图文风格（可选）
- **是否需要登录**：网页是否需要登录（可选）

### 3. 进度实时反馈

执行过程中会实时反馈进度：

```
✓ 场景识别：A1 - 采集并发布
✓ 参数收集完成
→ 步骤1/4：采集网页内容...
✓ 步骤1/4：内容已采集（3500字）
→ 步骤2/4：格式优化...
✓ 步骤2/4：格式已优化
→ 步骤3/4：生成配图...
✓ 步骤3/4：已生成3张配图
→ 步骤4/4：发布到微信公众号...
✓ 步骤4/4：已推送到草稿箱

✅ 任务完成！
```

## 操作步骤

### 标准流程

1. **用户描述需求**
   - 用户用自然语言描述需要完成的任务
   - 示例："采集这篇文章并发布到微信公众号"

2. **场景识别**
   - 系统分析用户输入，识别场景代码
   - 确定需要调用的技能链
   - 参考：[references/scenario-detection.md](references/scenario-detection.md)

3. **参数收集**
   - 系统提取用户输入中的参数（URL、关键词等）
   - 如有缺失，询问用户补充
   - 确认所有必需参数已收集

4. **工作流执行**
   - 按照技能链顺序执行各个步骤
   - 每步完成后反馈进度
   - 将上一步输出作为下一步输入
   - 参考：[references/workflow-templates.md](references/workflow-templates.md)

5. **结果汇总**
   - 展示最终结果
   - 提供文件路径或发布链接
   - 询问是否需要调整

### 可选分支

#### 分支A：用户不确定需求
- 系统展示可用场景列表
- 用户选择或描述具体需求
- 系统根据选择执行对应工作流

#### 分支B：参数不完整
- 系统列出缺失的参数
- 用户补充参数
- 继续执行工作流

#### 分支C：执行失败
- 系统报告失败原因
- 提供解决建议
- 询问是否重试或调整参数

## 场景详解

### 场景A：网页内容采集与再创作

#### A1：采集并发布
**用户需求**："采集这篇文章并发布到微信公众号"

**执行流程**：
1. 使用 `baoyu-url-to-markdown` 采集网页内容
2. 使用 `baoyu-format-markdown` 优化格式
3. 使用 `article-illustrator` 生成配图
4. 使用 `wechat-publisher` 发布到微信草稿箱

**输出**：
- 优化后的Markdown文件
- 配图文件（imgs/目录）
- 微信草稿箱链接

#### A2：采集并配图
**用户需求**："采集这篇文章并配图"

**执行流程**：
1. 使用 `baoyu-url-to-markdown` 采集网页内容
2. 使用 `article-illustrator` 生成配图

**输出**：
- 带配图的Markdown文件
- 配图文件（imgs/目录）

#### A3：采集转小红书
**用户需求**："把这个网页转成小红书图文"

**执行流程**：
1. 使用 `baoyu-url-to-markdown` 采集网页内容
2. 使用 `baoyu-xhs-images` 生成小红书图文

**输出**：
- 小红书图文系列（1-10张）
- 分析文档和大纲

---

### 场景B：热点内容创作

#### B1：热点文章生成
**用户需求**："根据AI热点生成一篇公众号文章"

**执行流程**：
1. 使用 `wechat-hotspot-publisher` 采集热点并生成文章
2. 自动生成标题、封面、配图、标签
3. 推送到微信公众号草稿箱

**输出**：
- 完整的HTML格式文章
- 微信草稿箱链接

#### B2：热点图文生成
**用户需求**："根据AI热点生成小红书图文"

**执行流程**：
1. 使用 `wechat-hotspot-publisher` 采集热点并生成内容
2. 使用 `baoyu-xhs-images` 转换为小红书图文

**输出**：
- 小红书图文系列（1-10张）
- 原始文章内容

#### B3：热点多平台发布
**用户需求**："根据AI热点生成内容，发布到微信和小红书"

**执行流程**：
1. 使用 `wechat-hotspot-publisher` 采集热点并生成文章
2. 使用 `baoyu-xhs-images` 转换为小红书图文
3. 分别发布到各平台

**输出**：
- 微信公众号草稿箱链接
- 小红书图文系列
- 各平台发布状态

---

### 场景C：原创内容优化与发布

#### C1：文章配图
**用户需求**："给这篇文章配图"

**执行流程**：
1. 使用 `article-illustrator` 分析文章并生成配图

**输出**：
- 带配图的Markdown文件
- 配图文件（imgs/目录）

#### C2：转小红书图文
**用户需求**："把这篇文章转成小红书图文"

**执行流程**：
1. 使用 `baoyu-xhs-images` 生成小红书图文

**输出**：
- 小红书图文系列（1-10张）
- 分析文档和大纲

#### C3：多平台发布
**用户需求**："把这篇文章发布到微信和X"

**执行流程**：
1. 使用 `baoyu-format-markdown` 优化格式
2. 分别发布到各平台

**输出**：
- 各平台发布状态和链接

---

### 场景D：单一功能调用

#### D1：仅采集网页
**用户需求**："采集这个网页"

**执行流程**：
1. 使用 `baoyu-url-to-markdown` 采集网页内容

**输出**：
- Markdown文件

#### D2：仅配图
**用户需求**："给文章配图"

**执行流程**：
1. 使用 `article-illustrator` 生成配图

**输出**：
- 带配图的Markdown文件
- 配图文件

#### D3：仅小红书图文
**用户需求**："生成小红书图文"

**执行流程**：
1. 使用 `baoyu-xhs-images` 生成图文

**输出**：
- 小红书图文系列

#### D4：仅发布
**用户需求**："发布到微信"

**执行流程**：
1. 使用对应平台的发布技能

**输出**：
- 发布状态和链接

## 资源索引

### 核心文档
- [场景识别规则](references/scenario-detection.md) - 详细的场景识别算法和规则
- [工作流模板](references/workflow-templates.md) - 各场景的完整工作流定义
- [技能整合说明](references/skill-integration.md) - 子技能的调用方式和参数说明
- [平台配置说明](references/platform-config.md) - 各平台的配置要求和注意事项
- [快速参考卡](references/quick-reference.md) - 常用场景和命令速查
- [故障排查指南](references/troubleshooting.md) - 常见问题和解决方案

### 使用示例
- [场景A1示例](examples/scenario-a1-example.md) - 采集并发布完整示例
- [场景B1示例](examples/scenario-b1-example.md) - 热点文章生成完整示例
- [场景C2示例](examples/scenario-c2-example.md) - 转小红书图文完整示例

### 子技能文档
- [baoyu-url-to-markdown](../content-creation-publisher/baoyu-url-to-markdown/SKILL.md)
- [article-illustrator](../content-creation-publisher/article-illustrator/SKILL.md)
- [baoyu-xhs-images](../baoyu-skills/skills/baoyu-xhs-images/SKILL.md)
- [wechat-hotspot-publisher](../temp4/wechat-hotspot-publisher/wechat-hotspot-publisher/SKILL.md)
- [content-creation-publisher](../content-creation-publisher/SKILL.md)

## 前置准备

### 环境依赖
```bash
# 检查Node.js
node --version

# 检查Chrome
chrome --version

# 检查Python
python --version
```

### 账号准备
1. **微信公众号**（可选）
   - 已注册的公众号账号
   - 或配置API凭证

2. **X/Twitter账号**（可选）
   - 已注册的X账号
   - 浏览器中保持登录状态

3. **小红书账号**（可选）
   - 已注册的小红书账号

4. **B站账号**（可选）
   - 已注册的B站账号

### 配置文件（可选）
```bash
# 创建配置文件
~/.baoyu-skills/.env

# 配置内容（可选）
WECHAT_APP_ID=your_app_id
WECHAT_APP_SECRET=your_app_secret
```

## 使用示例

### 示例1：采集文章并发布到微信
```
用户："采集这篇文章并发布到微信公众号"
URL: https://example.com/article

系统识别：场景A1
执行流程：
✓ 场景识别：A1 - 采集并发布
✓ 参数收集：URL已获取
→ 步骤1/4：采集网页内容...
✓ 步骤1/4：内容已采集（3500字）
→ 步骤2/4：格式优化...
✓ 步骤2/4：格式已优化
→ 步骤3/4：生成配图...
✓ 步骤3/4：已生成3张配图
→ 步骤4/4：发布到微信公众号...
✓ 步骤4/4：已推送到草稿箱

✅ 任务完成！
文件：url-to-markdown/example.com/article.md
配图：imgs/illustration-*.png（3张）
微信：已推送到草稿箱，请登录后台查看
```

### 示例2：热点内容创作并多平台发布
```
用户："根据AI热点生成一篇文章，发布到微信和小红书"

系统识别：场景B3
执行流程：
✓ 场景识别：B3 - 热点多平台发布
→ 收集参数：请提供关键词
用户："AI工具"
✓ 参数收集：关键词已获取
→ 步骤1/3：采集热点并生成文章...
✓ 步骤1/3：已生成文章《AI工具的未来：10个必知趋势》
→ 步骤2/3：转换为小红书图文...
✓ 步骤2/3：已生成5张小红书图文
→ 步骤3/3：多平台发布...
✓ 步骤3/3：发布完成

✅ 任务完成！
微信：已推送到草稿箱
小红书：图文已生成（5张），请手动发布
文件：xhs-images/ai-tools/01-cover.png 至 05-ending.png
```

### 示例3：文章配图
```
用户："给这篇文章配图"
文件：article.md

系统识别：场景C1
执行流程：
✓ 场景识别：C1 - 文章配图
✓ 参数收集：文件路径已获取
→ 步骤1/1：分析文章并生成配图...
✓ 步骤1/1：已生成4张配图

✅ 任务完成！
文件：article.md（已更新）
配图：imgs/illustration-*.png（4张）
配图位置：第2、4、6、8段后
```

### 示例4：网页转小红书
```
用户："把这个网页转成小红书图文"
URL: https://example.com/tutorial

系统识别：场景A3
执行流程：
✓ 场景识别：A3 - 采集转小红书
✓ 参数收集：URL已获取
→ 步骤1/2：采集网页内容...
✓ 步骤1/2：内容已采集（2800字）
→ 步骤2/2：生成小红书图文...
✓ 步骤2/2：已生成6张小红书图文

✅ 任务完成！
文件：xhs-images/tutorial/01-cover.png 至 06-ending.png
风格：notion（知识卡片风格）
布局：dense（高信息密度）
```

## 注意事项

### 1. 场景识别
- 系统会尽量准确识别场景，但可能需要用户确认
- 如果识别不准确，用户可以明确指定场景
- 复杂需求可能需要拆分为多个场景

### 2. 参数收集
- 系统会自动提取用户输入中的参数
- 缺失参数会主动询问用户
- 用户可以在描述需求时一次性提供所有参数

### 3. 执行效率
- 完整工作流可能需要3-10分钟
- 系统会实时反馈进度
- 可以随时中断执行

### 4. 平台限制
- 微信公众号发布需要账号登录
- 小红书图文需要手动上传
- X/Twitter发布需要浏览器登录状态

### 5. 内容质量
- 建议发布前人工审核内容
- 确保符合平台规范
- 注意版权和原创性

### 6. 技术限制
- 部分网站可能有反爬虫机制
- 网络环境可能影响采集和发布
- Chrome依赖可能影响部分功能

## 高级功能

### 自定义工作流
用户可以自定义技能调用顺序：

```
用户："采集这篇文章，先配图，再转小红书，最后发布到微信"

系统识别：自定义工作流
执行流程：
1. baoyu-url-to-markdown（采集）
2. article-illustrator（配图）
3. baoyu-xhs-images（转小红书）
4. wechat-publisher（发布）
```

### 批量处理
支持批量处理多个内容：

```
用户："采集这5篇文章并发布到微信"
URLs: [url1, url2, url3, url4, url5]

系统识别：批量场景A1
执行流程：
对每个URL执行场景A1工作流
```

### 定时发布
支持设置定时发布：

```
用户："采集这篇文章，明天上午10点发布到微信"

系统识别：场景A1 + 定时发布
执行流程：
1. 立即执行采集和配图
2. 设置定时任务，明天10点发布
```

## 故障排查

### 问题1：场景识别错误
**症状**：系统识别的场景与用户意图不符

**解决方案**：
- 用户明确指定场景代码（如"执行场景A1"）
- 用户更详细地描述需求
- 查看场景识别规则文档

### 问题2：参数收集失败
**症状**：系统无法提取必需参数

**解决方案**：
- 用户在描述中明确提供参数
- 回答系统的参数询问
- 检查参数格式是否正确

### 问题3：技能调用失败
**症状**：某个技能执行失败

**解决方案**：
- 查看错误信息
- 检查环境依赖是否满足
- 查看对应技能的故障排查文档
- 尝试单独调用该技能测试

### 问题4：发布失败
**症状**：内容无法发布到平台

**解决方案**：
- 检查账号登录状态
- 确认内容符合平台规范
- 检查网络连接
- 查看平台配置说明文档

### 问题5：执行超时
**症状**：工作流执行时间过长

**解决方案**：
- 检查网络连接
- 简化工作流（减少步骤）
- 分批处理内容
- 增加超时时间设置

## 更新日志

### v1.0.0（2026-02-09）
- ✅ 创建智能内容创作与发布系统
- ✅ 整合5个核心技能
- ✅ 实现14个场景支持
- ✅ 支持4个发布平台
- ✅ 提供智能场景识别
- ✅ 实现自动参数收集
- ✅ 提供实时进度反馈

---

**🚀 一句话完成从内容获取到多平台发布的全流程！**
