---
name: pet-commerce-creator
description: 萌宠带货短视频全流程创作技能，基于COZE视频大模型API，支持萌宠剧情/好物测评/品种科普/宠品带货等全类型创作，覆盖爆款解析反推、知识库联动、互动优化、素材批量下载、全素材整合，实现从创意到带货引流型成品视频的自动化生成，适配15-30秒竖屏9:16主流平台规格。
dependency:
  python:
    - coze-workload-identity>=1.0.0
    - yt-dlp>=2024.1.0
---

# 萌宠带货内容智创工坊

## 任务目标
- 本技能用于：萌宠带货短视频全流程自动化创作，聚焦涨粉与商品转化
- 能力包含：
  - 爆款视频链接解析反推并自动入库
  - 基于知识库的创意拆解、脚本创作、分镜设计
  - 适配COZE API的分镜图片、字幕、音效素材生成
  - 支持全步骤互动评价与批量素材下载
  - COZE API全素材整合合成带货型成品视频
  - 全流程质检与数据迭代闭环
- 触发条件：用户萌宠短视频创作需求（故事/测评/科普/带货）、视频链接解析需求、知识库调取需求

## 前置准备
- 依赖说明：技能所需依赖包
  ```
  coze-workload-identity>=1.0.0  # COZE视频API调用
  yt-dlp>=2024.1.0                # 视频下载（支持抖音/B站/YouTube等）
  ```
- 凭证配置：
  - 已配置COZE视频API凭证：coze_video_api
  - 凭证Key格式：COZE_COZE_VIDEO_API_7598017404148613135
  - 使用方式：通过环境变量自动读取，无需手动填写
- 视频下载目录：`./downloads`（自动创建）

## 操作步骤
- 标准流程：
  1. 用户输入视频链接（抖音/B站/YouTube等）
  2. 调用`scripts/video_downloader.py`下载视频及元数据
  3. 调用`scripts/coze_video_api.py`处理素材上传、视频合成、状态轮询
  4. 基于知识库参考文档（references/agents-prompts.md）执行多智能体协同创作
  5. 各智能体生成独立输出物，带点赞/点踩/分享功能
  6. 成品视频支持高清下载、二次创作、平台发布

- 视频下载步骤：
  1. 用户输入视频链接（支持抖音/B站/YouTube/快手/小红书等主流平台）
  2. 调用`scripts/video_downloader.py download <URL>`下载视频
  3. 自动提取视频元数据（标题、时长、作者、观看数、点赞数等）
  4. 自动下载视频缩略图
  5. 输出视频文件路径及完整元数据JSON
  6. 爆款解析铲屎官基于下载的视频进行解析反推
- 核心智能体协同：
  1. 爆款解析铲屎官 - 视频链接解析反推、知识库运营
  2. 萌趣创意铲屎官 - 创意拆解、萌点提炼、带货植入点设计
  3. 故事脚本喵掌柜 - 带货导向脚本创作、镜头拆分
  4. 分镜脚本绘影匠 - COZE API适配标准化分镜脚本
  5. 分镜导摄喵sir - 画面规范设计、商品展示构图规划
  6. 萌镜画师毛球匠 - 分镜图片生成、批量下载支持
  7. 字幕萌编宠酱 - 字幕参数包、带货口播文字稿创作
  8. 音效趣配汪酱 - 音效素材包、配音素材包创作
  9. 视频合成掌镜官 - COZE API全素材整合、带货型成品视频合成
  10. 品控巡检宠管家 - 全流程质检、API适配校验、带货引流导向校验
  11. 数据迭代铲屎官 - 数据统计、迭代优化建议、技能升级

- 纯API合成强制规则：
  1. 禁止使用任何本地依赖包（moviepy/opencv-python/mediapipe/pillow/numpy）
  2. 所有素材（图片/字幕/音效）必须适配COZE API格式要求
  3. 脚本通过`scripts/coze_video_api.py`调用COZE API，使用coze-workload_identity的requests
  4. 出现本地包调用行为立即终止流程

- 可选分支：
  - 当提供视频链接：执行爆款解析反推→自动入库→生成参考包
  - 当需要二次创作：从成品视频回溯至任意创作步骤修改
  - 当需要知识库调取：根据带货品类/涨粉目标匹配爆款参考

## 资源索引
- 必要脚本：
  - [scripts/video_downloader.py](scripts/video_downloader.py)（用途：视频下载，支持抖音/B站/YouTube等主流平台，提取视频元数据和缩略图）
  - [scripts/coze_video_api.py](scripts/coze_video_api.py)（用途：COZE视频API封装，支持素材上传、视频合成、状态轮询）
- 领域参考：
  - [references/agents-prompts.md](references/agents-prompts.md)（何时读取：执行多智能体协同创作时，11大智能体的完整提示词）
  - [references/coze-api-specs.md](references/coze-api-specs.md)（何时读取：配置API参数、校验素材格式时）
  - [references/pet-character-library.md](references/pet-character-library.md)（何时读取：设计萌宠角色规范时）
  - [references/output-templates.md](references/output-templates.md)（何时读取：生成标准化输出格式时）
  - [references/knowledge-base-structure.md](references/knowledge-base-structure.md)（何时读取：理解知识库分类、自动入库逻辑时）
- 输出资产：（动态生成，无固定静态资产）

## 注意事项
- 严格遵循纯API合成原则，所有技术操作通过COZE API完成
- 带货引流为核心导向，所有创作环节需明确流量钩子、商品植入点、关注引导点
- 知识库联动实时生效，爆款解析结果自动入库，创作类智能体自动调取参考
- 全步骤互动数据实时同步至创作优化数据池，作为迭代优化依据
- 素材支持单张/单个+整包批量下载，格式统一可复用
- 成品视频支持高清下载、二次创作、平台发布，带货信息清晰传递

## 使用示例

### 示例0：视频下载与解析反推（新增）
- 功能说明：下载抖音/B站/YouTube等平台的视频，提取元数据，进行解析反推
- 执行方式：video_downloader.py + 爆款解析铲屎官
- 关键参数：
  - 视频链接：用户提供视频URL
  - 输出目录：./downloads（自动创建）
- 示例流程：
  1. 用户输入视频链接（如https://www.bilibili.com/video/BV1xx411c7mD）
  2. 调用video_downloader.py下载视频
     ```bash
     python scripts/video_downloader.py download "https://www.bilibili.com/video/BV1xx411c7mD"
     ```
  3. 自动下载视频文件（MP4格式）
  4. 自动提取视频元数据（标题、时长、作者、观看数、点赞数等）
  5. 自动下载视频缩略图
  6. 输出结果包含：
     - 视频文件路径：`./downloads/视频标题.mp4`
     - 元数据JSON：`./downloads/视频标题.info.json`
     - 缩略图：`./downloads/视频标题.jpg`
  7. 爆款解析铲屎官基于下载的视频进行解析反推
  8. 生成解析报告并自动入库至知识库

### 示例1：萌宠好物测评带货视频创作
- 功能说明：创作猫粮测评带货视频，15秒竖屏9:16
- 执行方式：多智能体协同 + COZE API合成
- 关键参数：
  - 创作类型：好物测评
  - 带货品类：主粮（猫粮）
  - 涨粉目标：精准宠主
  - 时长：15秒
  - 风格：萌宠轻喜剧
- 示例流程：
  1. 爆款解析铲屎官调取知识库，输出测评带货参考包
  2. 萌趣创意铲屎官拆解创意（前3秒展示猫粮包装→猫咪馋嘴→吃粮镜头→关注引导）
  3. 故事脚本喵掌柜创作带货脚本（口播："这款猫粮配方超干净，看看猫咪多喜欢！记得点赞关注"）
  4. 分镜导摄喵sir规划商品展示构图（猫粮特写+猫咪吃粮动作）
  5. 萌镜画师毛球匠生成4-6张分镜图片，支持批量下载
  6. 字幕萌编宠酱创作字幕参数包（卖点字幕：配方干净/无添加，关注引导：关注领优惠券）
  7. 音效趣配汪酱创作音效+配音素材包（轻快背景音乐+清晰口播音色）
  8. 视频合成掌镜官调用COZE API整合所有素材
  9. 品控巡检宠管家质检API适配性、带货引流导向落地性
  10. 输出成品视频+素材整合台账，支持下载与二次创作

### 示例2：爆款视频链接解析反推
- 功能说明：解析抖音爆款萌宠带货视频，反推创作逻辑并自动入库
- 执行方式：爆款解析铲屎官 + 知识库自动收录
- 关键参数：
  - 视频链接：用户提供抖音/快手/小红书等平台链接
  - 解析维度：流量逻辑、带货转化逻辑、内容创作反推
- 示例流程：
  1. 用户输入视频链接
  2. 爆款解析铲屎官解析视频（时长10万+、点赞5万+、转化率2.3%）
  3. 生成解析报告：
     - 流量钩子：前3秒猫咪从猫粮袋钻出
     - 带货植入：第5秒口播提到猫粮品牌
     - 关注引导：第12秒字幕显示"关注有福利"
  4. 自动按"宠物品种/创作类型/带货品类"分类入库
  5. 输出参考包供后续创作调用

### 示例3：全步骤互动优化与二次创作
- 功能说明：基于成品视频的互动数据，优化创作并二次创作
- 执行方式：互动数据采集 + 回溯修改 + 重新合成
- 关键参数：
  - 成品视频：已生成的带货视频
  - 互动数据：点赞率85%、点踩率5%、评论反馈"商品卖点不突出"
- 示例流程：
  1. 用户查看成品视频，点赞/点踩/分享/评论
  2. 数据迭代铲屎官分析互动数据（点踩集中在"卖点不清晰"）
  3. 生成优化建议（强化商品卖点字幕、增加卖点特写镜头）
  4. 用户点击"一键二次创作"
  5. 回溯至分镜脚本绘影匠/分镜导摄喵sir修改商品展示设计
  6. 重新生成素材、合成成品视频
  7. 输出优化后成品视频，对比优化前后的带货引流效果
