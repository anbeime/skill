# 协同工作指南

本指南说明 ppt-roadshow-generator 如何与其他 PPT Skill 协同工作。

## Skill 生态

### 三个 PPT Skill 的分工

| Skill | 核心功能 | 输出 | 适用场景 |
|-------|---------|------|---------|
| **ppt-generator** | 内容生成 | PPT 内容（JSON）| 从零生成 PPT 内容 |
| **nanobanana-ppt-visualizer** | 视觉增强 | 交互式播放器 + 图片 | 生成视觉呈现 |
| **ppt-roadshow-generator** | 路演视频 | 完整路演视频 | 生成含配音、音效、字幕的视频 |

## 协同工作流程

### 流程 1：完整协作（三 Skill 协同）

```
用户请求："生成一个产品发布的完整路演视频"

┌─────────────────────────────────────────────────────────┐
│  步骤 1：ppt-generator                                  │
│  执行 7 个角色，生成 PPT 内容（JSON）                    │
└─────────────────────────────────────────────────────────┘
                          │
                          ▼ 输出 JSON
┌─────────────────────────────────────────────────────────┐
│  步骤 2：nanobanana-ppt-visualizer                      │
│  接收 JSON，生成图片和播放器                              │
└─────────────────────────────────────────────────────────┘
                          │
                          ▼ 输出图片
┌─────────────────────────────────────────────────────────┐
│  步骤 3：ppt-roadshow-generator                       │
│  接收图片，生成演讲稿、配音、音效、字幕、视频              │
└─────────────────────────────────────────────────────────┘
                          │
                          ▼ 输出
              完整路演视频（含所有元素）
```

### 流程 2：两步协同（ppt-generator + ppt-roadshow-generator）

```
用户请求："生成 PPT 内容和路演视频"

┌─────────────────────────────────────────────────────────┐
│  步骤 1：ppt-generator                                  │
│  执行 7 个角色，生成 PPT 内容（JSON）                    │
└─────────────────────────────────────────────────────────┘
                          │
                          ▼ 输出 JSON
┌─────────────────────────────────────────────────────────┐
│  步骤 2：ppt-roadshow-generator                       │
│  接收 JSON，生成图片、演讲稿、配音、音效、字幕、视频        │
└─────────────────────────────────────────────────────────┘
                          │
                          ▼ 输出
              完整路演视频（含所有元素）
```

### 流程 3：两步协同（nanobanana-ppt-visualizer + ppt-roadshow-generator）

```
用户请求："我有图片，帮我生成路演视频"

┌─────────────────────────────────────────────────────────┐
│  步骤 1：nanobanana-ppt-visualizer                      │
│  生成图片和播放器                                        │
└─────────────────────────────────────────────────────────┘
                          │
                          ▼ 输出图片
┌─────────────────────────────────────────────────────────┐
│  步骤 2：ppt-roadshow-generator                       │
│  接收图片，生成演讲稿、配音、音效、字幕、视频              │
└─────────────────────────────────────────────────────────┘
                          │
                          ▼ 输出
              完整路演视频（含所有元素）
```

## 数据接口兼容性

### JSON 格式

三个 Skill 使用统一的 JSON 格式：

```json
{
  "metadata": {
    "title": "演示文稿标题",
    "author": "作者姓名"
  },
  "slides": [
    {
      "layout": "TitleSlide",
      "title": "封面标题",
      "content": ["副标题"],
      "notes": "备注"
    }
  ]
}
```

### 图片格式

- 文件命名：slide-01.png, slide-02.png, ...
- 分辨率：1920x1080（16:9）
- 格式：PNG

## 协同使用场景

### 场景 1：产品发布会

**用户需求**：生成完整的产品发布会视频

**协同流程**：
1. ppt-generator 生成产品介绍内容（JSON）
2. nanobanana-ppt-visualizer 生成产品图片
3. ppt-roadshow-generator 生成演讲稿、配音、音效、字幕、视频

**输出**：完整的路演视频（包含所有元素）

### 场景 2：公司介绍

**用户需求**：生成公司介绍路演视频

**协同流程**：
1. ppt-generator 生成公司介绍内容（JSON）
2. ppt-roadshow-generator 生成所有元素（图片、演讲稿、配音等）

**输出**：完整的路演视频

### 场景 3：已有内容，生成视频

**用户需求**：我有 PPT 内容，生成路演视频

**协同流程**：
1. 用户上传 JSON 或使用 ppt-generator 生成
2. ppt-roadshow-generator 接收 JSON，生成所有元素

**输出**：完整的路演视频

### 场景 4：已有图片，生成视频

**用户需求**：我有 PPT 图片，生成路演视频

**协同流程**：
1. 用户上传图片或使用 nanobanana-ppt-visualizer 生成
2. ppt-roadshow-generator 接收图片，生成演讲稿、配音、音效、字幕、视频

**输出**：完整的路演视频

## 协同优势

### 1. 功能互补
- ppt-generator：内容生成
- nanobanana-ppt-visualizer：视觉呈现
- ppt-roadshow-generator：多媒体合成

### 2. 灵活组合
- 可以单独使用任何一个 Skill
- 可以两两组合
- 可以三者协同

### 3. 数据兼容
- 统一的 JSON 格式
- 统一的图片命名
- 无缝数据传递

### 4. 风格一致
- 品牌风格学习确保一致性
- 可以一次性生成 100 页
- 风格保持统一

## 最佳实践

### 1. 先学习品牌风格
```bash
# 学习品牌风格
python scripts/style_learner.py \
  --examples-dir ./brand_examples \
  --output ./brand_style.json
```

### 2. 按顺序执行 Skill
```
ppt-generator → nanobanana-ppt-visualizer → ppt-roadshow-generator
```

### 3. 确认每一步输出
在进入下一步之前，确认当前步骤的输出符合预期。

### 4. 保存中间结果
保存 JSON、图片等中间结果，便于后续调整。

### 5. 批量生成
可以批量生成多个路演视频，风格保持一致。

## 故障排查

### 问题 1：JSON 格式不兼容
**症状**：Skill 无法解析另一个 Skill 的输出
**解决**：确保使用最新版本的三个 Skill，它们使用统一的 JSON 格式

### 问题 2：图片命名不一致
**症状**：无法找到图片文件
**解决**：确保图片命名为 slide-01.png, slide-02.png, ...

### 问题 3：品牌风格不一致
**症状**：生成的元素风格不统一
**解决**：确保所有 Skill 使用相同的 brand_style.json

### 问题 4：音画不同步
**症状**：音频和视频不同步
**解决**：
- 确保演讲稿时长与 PPT 页数匹配
- 调整 words_per_second 参数
- 检查 FFmpeg 合成参数

## 总结

三个 PPT Skill 完美互补，形成完整的 PPT 生态：

1. **ppt-generator**：内容生成
2. **nanobanana-ppt-visualizer**：视觉增强
3. **ppt-roadshow-generator**：多媒体合成

通过协同工作，可以生成从内容到完整路演视频的一切！
