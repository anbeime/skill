<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æœ¬åœ°æŠ€èƒ½åº“ - Local Skills</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <div class="container">
            <h1>ğŸ’¾ æœ¬åœ°æŠ€èƒ½åº“</h1>
            <p class="subtitle">å·²å®‰è£…çš„41ä¸ªå¯ç”¨æŠ€èƒ½</p>
            <nav>
                <a href="index.html">å®˜æ–¹æŠ€èƒ½å•†åº—</a>
                <a href="local-skills.html" class="active">æœ¬åœ°æŠ€èƒ½åº“</a>
                <a href="comparison.html">æŠ€èƒ½å¯¹æ¯”</a>
                <a href="https://github.com/anbeime/skill" target="_blank">GitHub</a>
            </nav>
        </div>
    </header>

    <main class="container">
        <section class="stats">
            <div class="stat-card">
                <h3>19</h3>
                <p>ç‹¬ç«‹æŠ€èƒ½</p>
            </div>
            <div class="stat-card">
                <h3>3</h3>
                <p>æŠ€èƒ½é›†</p>
            </div>
            <div class="stat-card">
                <h3>22</h3>
                <p>å­æŠ€èƒ½</p>
            </div>
            <div class="stat-card">
                <h3>49.24 MB</h3>
                <p>æ€»å¤§å°</p>
            </div>
        </section>

        <section class="filters">
            <h2>ğŸ” ç­›é€‰æŠ€èƒ½</h2>
            <div class="filter-buttons">
                <button class="filter-btn active" data-filter="all">å…¨éƒ¨ (41)</button>
                <button class="filter-btn" data-filter="independent">ç‹¬ç«‹æŠ€èƒ½ (19)</button>
                <button class="filter-btn" data-filter="collection">æŠ€èƒ½é›† (3)</button>
                <button class="filter-btn" data-filter="needs-api">éœ€è¦API (10)</button>
                <button class="filter-btn" data-filter="free">å®Œå…¨å…è´¹ (9)</button>
            </div>
            <div class="category-filters">
                <select id="category-select">
                    <option value="all">æ‰€æœ‰åˆ†ç±»</option>
                    <option value="å†…å®¹åˆ›ä½œä¸å‘å¸ƒ">å†…å®¹åˆ›ä½œä¸å‘å¸ƒ</option>
                    <option value="PPTä¸æ¼”ç¤º">PPTä¸æ¼”ç¤º</option>
                    <option value="è¯­éŸ³ä¸éŸ³é¢‘">è¯­éŸ³ä¸éŸ³é¢‘</option>
                    <option value="æ•°å­—äººä¸è§†é¢‘é…éŸ³">æ•°å­—äººä¸è§†é¢‘é…éŸ³</option>
                    <option value="æ™ºèƒ½ä½“åä½œ">æ™ºèƒ½ä½“åä½œ</option>
                    <option value="äº§å“ä¸é¡¹ç›®ç®¡ç†">äº§å“ä¸é¡¹ç›®ç®¡ç†</option>
                    <option value="è®¾è®¡ä¸å¯è§†åŒ–">è®¾è®¡ä¸å¯è§†åŒ–</option>
                    <option value="ç‰¹æ®Šåœºæ™¯">ç‰¹æ®Šåœºæ™¯</option>
                    <option value="å·¥å…·ä¸è¾…åŠ©">å·¥å…·ä¸è¾…åŠ©</option>
                    <option value="è§†é¢‘åˆ›ä½œ">è§†é¢‘åˆ›ä½œ</option>
                </select>
            </div>
        </section>

        <section class="skills-list" id="skills-container">
            <h2>ğŸ“¦ æŠ€èƒ½åˆ—è¡¨</h2>
            <div id="skills-grid" class="skills-grid">
                <!-- æŠ€èƒ½å¡ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
                <div class="loading">åŠ è½½ä¸­...</div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2026 Skill Store. æœ¬åœ°æŠ€èƒ½åº“ä½ç½®: D:\tool\skills</p>
            <p>å¤‡ä»½ä½ç½®: D:\tool\skills\skillå‹ç¼©æ–‡ä»¶ (73ä¸ªå‹ç¼©åŒ…, 69.20 MB)</p>
        </div>
    </footer>

    <script>
        // åŠ è½½æœ¬åœ°æŠ€èƒ½æ•°æ®
        async function loadSkills() {
            try {
                const response = await fetch('/data/local_skills.json');
                const data = await response.json();
                displaySkills(data);
            } catch (error) {
                console.error('åŠ è½½æŠ€èƒ½æ•°æ®å¤±è´¥:', error);
                document.getElementById('skills-grid').innerHTML = '<p class="error">åŠ è½½å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•</p>';
            }
        }

        function displaySkills(data) {
            const container = document.getElementById('skills-grid');
            container.innerHTML = '';

            // æ˜¾ç¤ºç‹¬ç«‹æŠ€èƒ½
            data.independent_skills.forEach(skill => {
                const card = createSkillCard(skill, 'independent');
                container.appendChild(card);
            });

            // æ˜¾ç¤ºæŠ€èƒ½é›†
            data.skill_collections.forEach(collection => {
                const card = createSkillCard(collection, 'collection');
                container.appendChild(card);
            });
        }

        function createSkillCard(skill, type) {
            const card = document.createElement('div');
            card.className = `skill-card ${type}`;
            card.dataset.category = skill.category;
            card.dataset.needsApi = skill.needs_api;
            
            const apiStatus = skill.needs_api === true ? 'éœ€è¦API' : 
                            skill.needs_api === 'optional' ? 'å¯é€‰API' : 'å®Œå…¨å…è´¹';
            const apiClass = skill.needs_api === true ? 'needs-api' : 
                           skill.needs_api === 'optional' ? 'optional-api' : 'free';

            const subSkillsInfo = type === 'collection' ? 
                `<p class="sub-skills">åŒ…å« ${skill.sub_skills_count} ä¸ªå­æŠ€èƒ½</p>` : '';

            const integratedSkillsInfo = skill.integrated_sub_skills ? 
                `<p class="integrated-skills">å·²æ•´åˆ: ${skill.integrated_sub_skills.join(', ')}</p>` : '';

            card.innerHTML = `
                <div class="skill-header">
                    <h3>${skill.name}</h3>
                    <span class="badge ${apiClass}">${apiStatus}</span>
                </div>
                <p class="category">${skill.category}</p>
                <p class="description">${skill.description}</p>
                ${subSkillsInfo}
                ${integratedSkillsInfo}
                <div class="skill-meta">
                    <span class="size">ğŸ“¦ ${skill.size_mb} MB</span>
                    <span class="frequency">${'â­'.repeat(skill.usage_frequency)}</span>
                    <span class="backup">${skill.has_backup ? 'âœ… å·²å¤‡ä»½' : 'âŒ æ— å¤‡ä»½'}</span>
                </div>
                <div class="skill-api">
                    <small>API: ${skill.api_type}</small>
                </div>
            `;

            return card;
        }

        // ç­›é€‰åŠŸèƒ½
        document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                
                const filter = this.dataset.filter;
                filterSkills(filter);
            });
        });

        document.getElementById('category-select').addEventListener('change', function() {
            const category = this.value;
            filterByCategory(category);
        });

        function filterSkills(filter) {
            const cards = document.querySelectorAll('.skill-card');
            cards.forEach(card => {
                let show = false;
                switch(filter) {
                    case 'all':
                        show = true;
                        break;
                    case 'independent':
                        show = card.classList.contains('independent');
                        break;
                    case 'collection':
                        show = card.classList.contains('collection');
                        break;
                    case 'needs-api':
                        show = card.dataset.needsApi === 'true';
                        break;
                    case 'free':
                        show = card.dataset.needsApi === 'false';
                        break;
                }
                card.style.display = show ? 'block' : 'none';
            });
        }

        function filterByCategory(category) {
            const cards = document.querySelectorAll('.skill-card');
            cards.forEach(card => {
                if (category === 'all' || card.dataset.category === category) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        // é¡µé¢åŠ è½½æ—¶æ‰§è¡Œ
        document.addEventListener('DOMContentLoaded', loadSkills);
    </script>
</body>
</html>